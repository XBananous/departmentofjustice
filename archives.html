<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">

<title>Department Of Justice - Archives</title>
<meta name="description" content="Consultez les rapports, audiences et dÃ©crets officiels du Department Of Justice.">
<meta property="og:title" content="Department Of Justice">
<meta property="og:description" content="Consultez les documents officiels.">
<meta property="og:image" content="https://xbananous.github.io/departmentofjustice/logo.png">
<meta property="og:url" content="https://xbananous.github.io/departmentofjustice/archives.html">

<link rel="icon" href="logo.png">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;800&display=swap" rel="stylesheet">
<script src="https://unpkg.com/lucide@latest"></script>

<style>
:root {
  --bg:#0b0f14; --panel:#111823; --soft:#16202d;
  --ink:#eaf2ff; --muted:#b7c3d9; --accent:#6aa7ff; --danger:#ff5d5d;
}

body {font-family:Inter,system-ui,sans-serif;background: radial-gradient(1200px 600px at 80% -10%, #0f1725 0%, #0b0f14 60%) fixed;color:var(--ink); margin:0;}
.wrap {max-width:980px;margin:28px auto;padding:22px}
header {display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:18px;}
.nav-left {display:flex;align-items:center;gap:10px;}
.nav-left img {height:32px;}
.nav-left h1 {font-size:20px;margin:0;font-weight:800;text-transform:uppercase;}
.nav-right {display:flex;gap:8px;}
.nav-right a, .nav-right button {
  background:var(--soft);
  border:1px solid rgba(255,255,255,.06);
  padding:12px;border-radius:12px;
  color:var(--ink);display:flex;align-items:center;justify-content:center;
  transition:all .25s ease;cursor:pointer;font-weight:600;
}
.nav-right a:hover, .nav-right button:hover {box-shadow:0 0 0 4px rgba(106,167,255,.18);color:var(--accent);transform:translateY(-3px);}

.search-section {text-align:center;margin-bottom:24px;transition:opacity .3s;}
.search-section .desc {font-weight:700;font-size:15px;margin-bottom:10px;display:block;}
.search-container {position:relative;margin:0 auto;width:100%;max-width:600px;box-sizing:border-box;}
.search-container input[type="text"] {width:100%; padding:14px; border-radius:12px;border:1px solid rgba(255,255,255,.06);background:var(--soft); color:var(--ink); outline:none;font-size:16px; transition:box-shadow .3s; box-sizing:border-box;}
.search-container input[type="text"]:focus {box-shadow:0 0 0 4px rgba(106,167,255,.14);}

.card {background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(255,255,255,0)), var(--panel);border:1px solid rgba(255,255,255,.04);border-radius:16px;padding:18px;box-shadow:0 14px 40px rgba(0,0,0,.45);margin-bottom:20px;opacity:0;transform:translateY(10px);animation:fadeSlide .5s forwards;}
@keyframes fadeSlide {to {opacity:1; transform:translateY(0);}}

.doc-item {padding:12px;margin:8px 0;border-radius:10px;background:rgba(255,255,255,.02);border:1px solid rgba(255,255,255,.03);display:flex;justify-content:space-between;align-items:center;cursor:pointer;transition:transform .12s,box-shadow .12s;}
.doc-item:hover {transform:translateY(-3px);box-shadow:0 6px 20px rgba(0,0,0,.4);}
.doc-info {display:flex;flex-direction:column;}
.doc-title {font-weight:700;}
.doc-date {font-size:13px;color:var(--muted);}
.doc-actions {display:flex;gap:8px;}
.doc-actions button {border:0;background:transparent;cursor:pointer;color:var(--muted);padding:4px;transition:color .2s;}
.doc-actions button:hover{color:var(--accent);}

.pdf-view {width:100%;height:85vh;}
.pdf-view embed{width:100%;height:100%;border:none;}

.toast {position:fixed;bottom:20px;right:20px;background:var(--accent);color:white;padding:12px 20px;border-radius:10px;opacity:0;transform:translateY(10px);transition:opacity .3s, transform .3s;z-index:9999;}
.toast.show{opacity:1; transform:translateY(0);}

.modal {position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.7);display:none;align-items:center;justify-content:center;z-index:10000;}
.modal-content {background:var(--panel);padding:20px;border-radius:12px;max-width:400px;width:90%;text-align:center;}
.modal-content input {width:100%;padding:12px;margin-top:10px;border-radius:8px;border:1px solid rgba(255,255,255,.1);background:var(--soft);color:var(--ink);}
.modal-content button {margin-top:15px;padding:10px 16px;border:none;border-radius:10px;background:var(--accent);color:white;font-weight:600;cursor:pointer;}
.modal-content button:hover {background:#4d8dff;}
footer{padding:20px;text-align:center;font-size:14px;color:var(--muted);border-top:1px solid rgba(255,255,255,.1);margin-top:40px;}
</style>
</head>
<body>
<div class="wrap">

  <header>
    <div class="nav-left">
      <img src="logo.png" alt="logo">
      <h1 id="page-title">Department Of Justice</h1>
    </div>
    <div class="nav-right" id="nav-right">
      <a href="archives.html"><i data-lucide="arrow-left"></i></a>
      <button id="open-modal"><i data-lucide="send"></i></button>
    </div>
  </header>

  <div id="doc-card" style="display:none;" class="card"></div>

  <section class="search-section" id="search-section">
    <span class="desc">Rechercher un document dans nos archives</span>
    <div class="search-container">
      <input type="text" id="search" placeholder="Rechercher...">
    </div>
  </section>

  <div id="list-view"></div>
</div>

<div class="toast" id="toast">Lien copiÃ© !</div>

<!-- MODAL -->
<div class="modal" id="modal">
  <div class="modal-content">
    <h2>Envoi Webhook</h2>
    <p>Entrez le code d'accÃ¨s :</p>
    <input type="password" id="access-code" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢">
    <button id="send-webhooks">Valider et Envoyer</button>
  </div>
</div>

<footer>Â© 2025 Department Of Justice</footer>

<script>
lucide.createIcons();

const webhooks = {
  "Rapports":"https://discord.com/api/webhooks/1408562768763818204/PQhYBeQTDP5KeelYHZm4Hf1G_VsUzKC8Fja8_Oi-vTkTNJlUDLQv_DcCiqXqmWuDnPXU",
  "Mandats":"https://discord.com/api/webhooks/1408562935659364542/JQj4Wiy5SJbYCKZYbsq3YD6uVT8352ol48f4glmRxe8JST0wIHOhJfwVxMjMEs2V3eB_",
  "Audiences":"https://discord.com/api/webhooks/1408563001493033104/VwFr-CLVrw6OeUdyHwtFGqT4xD8Y9WeP1FG5paC8gdRnL0hOpWJy1tpg3cER8KlYD_1K",
  "Autres":"https://discord.com/api/webhooks/1408563052932104372/XHenKp_83g3fHHX2xdKDgb3XmsRlyE9uVndvtOFEnZO87DxSEvlmpDZ9UROofaYZXd5n"
};

// Hash SHA-256 du code "secret123"
const CODE_HASH="d5bba56a25c3a8b27f58e8f8ddf3e912e7a20c2e9d4b5a516e55c1b8b630f35d"; 

async function sha256(message){
  const msgBuffer=new TextEncoder().encode(message);
  const hashBuffer=await crypto.subtle.digest("SHA-256",msgBuffer);
  return Array.from(new Uint8Array(hashBuffer)).map(b=>b.toString(16).padStart(2,"0")).join("");
}

const modal=document.getElementById("modal");
document.getElementById("open-modal").onclick=()=>{modal.style.display="flex";}
window.onclick=(e)=>{if(e.target==modal)modal.style.display="none";}

document.getElementById("send-webhooks").onclick=async()=>{
  const code=document.getElementById("access-code").value;
  const hash=await sha256(code);
  if(hash!==CODE_HASH){alert("Code invalide !");return;}
  modal.style.display="none";
  sendAllWebhooks();
};

async function sendAllWebhooks(){
  for(let cat in documentsData){
    if(!webhooks[cat])continue;
    for(let doc of documentsData[cat]){
      await fetch(webhooks[cat],{
        method:"POST",
        headers:{"Content-Type":"application/json"},
        body:JSON.stringify({
          embeds:[{
            title:doc.title,
            description:`ðŸ“… ${doc.date}`,
            url:`https://xbananous.github.io/departmentofjustice/${doc.pdfUrl}`,
            author:{name:`${cat}`},
            footer:{text:"Envoi automatique via Department Of Justice"}
          }]
        })
      });
    }
  }
  showToast("Tous les documents ont Ã©tÃ© envoyÃ©s âœ…");
}

// ========================
// Ton code initial inchangÃ© (render list, search, openPDF...)
// ========================
const documentsData = {
  "Rapports":[
    {title:"RAPPORT INTERVENTION DPO_21082025_1",pdfUrl:"Rapport210820251.pdf",date:"21/08/2025"},
    {title:"RAPPORT INTERVENTION DPO_21082025_2",pdfUrl:"Rapport210820252.pdf",date:"21/08/2025"},
  ],
  "Mandats":[
    {title:"MANDAT D'ARRÃŠT DPO_22082025_1",pdfUrl:"Mandat220820251.pdf",date:"22/08/2025"},
  ],
  "Audiences":[],
  "Autres":[
    {title:"AUTORISATION EXP : DUBOIS NOAH",pdfUrl:"DuboisNoahAutoExp21082025.pdf",date:"21/08/2025"},
  ],
};

const listView=document.getElementById("list-view");
const pageTitle=document.getElementById("page-title");
const searchSection=document.getElementById("search-section");
const searchInput=document.getElementById("search");
const toast=document.getElementById("toast");
const docCard=document.getElementById("doc-card");
let currentDoc=null;

function showToast(msg){toast.textContent=msg;toast.classList.add('show');setTimeout(()=>toast.classList.remove('show'),2000);}

function renderList(data){
  listView.innerHTML="";
  for(let category in data){
    const section=document.createElement("div");
    section.className="card";
    section.innerHTML=`<h2>${category}</h2>`;
    data[category].forEach(doc=>{
      const div=document.createElement("div");
      div.className="doc-item";
      const info=document.createElement("div");
      info.className="doc-info";
      info.innerHTML=`<span class="doc-title">${doc.title}</span><span class="doc-date">${doc.date}</span>`;

      const actions=document.createElement("div");
      actions.className="doc-actions";

      const openBtn=document.createElement("button");
      openBtn.innerHTML=`<i data-lucide="file-text"></i>`;
      openBtn.onclick=(e)=>{e.stopPropagation();openPDF(doc.pdfUrl,doc.title,doc.date);};

      div.appendChild(info);
      div.appendChild(actions);
      section.appendChild(div);
    });
    listView.appendChild(section);
  }
  lucide.createIcons();
}

function openPDF(url,title,date=""){
  currentDoc=title;
  history.replaceState(null,null,`archives.html?doc=${encodeURIComponent(title)}`);
  docCard.style.display="block";
  docCard.innerHTML=`<div class="doc-item"><div class="doc-info"><span class="doc-title">${title}</span><span class="doc-date">${date}</span></div></div>`;
  searchSection.style.display="none";
  listView.innerHTML=`<div class="pdf-view"><embed src="${url}" type="application/pdf"></div>`;
  lucide.createIcons();
}

function goHome(){currentDoc=null;docCard.style.display="none";searchSection.style.display="block";renderList(documentsData);pageTitle.textContent="Department Of Justice";history.replaceState(null,null,"archives.html");}

renderList(documentsData);

// ouverture auto si ?doc
const params=new URLSearchParams(window.location.search);
if(params.get("doc")){
  const title=params.get("doc");
  for(let cat in documentsData){
    const found=documentsData[cat].find(d=>d.title===title);
    if(found){openPDF(found.pdfUrl,found.title,found.date);}
  }
}
</script>
</body>
</html>
