<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <!-- Meta par défaut -->
  <title>Department Of Justice</title>
  <meta name="description" content="Consultez les rapports, audiences et décrets officiels du Department Of Justice.">
  <meta property="og:title" content="Department Of Justice">
  <meta property="og:description" content="Consultez les documents officiels.">
  <meta property="og:image" content="https://xbananous.github.io/departmentofjustice/logo.png">
  <meta property="og:url" content="https://xbananous.github.io/departmentofjustice/index.html">
  <meta name="twitter:card" content="summary_large_image">

  <link rel="icon" href="logo.png">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;800&display=swap" rel="stylesheet">
  <script src="https://unpkg.com/lucide@latest"></script>

  <style>
    :root {
      --bg:#0b0f14;
      --panel:#111823;
      --soft:#16202d;
      --ink:#eaf2ff;
      --muted:#b7c3d9;
      --accent:#6aa7ff;
      --accent-2:#8be9fd;
      --danger:#ff5d5d;
      --ok:#35d07f;
    }

    body {
      font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background: radial-gradient(1200px 600px at 80% -10%, #0f1725 0%, #0b0f14 60%) fixed;
      color:var(--ink);
      margin:0;
    }

    .wrap {max-width:980px;margin:28px auto;padding:22px}

    header {
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      margin-bottom:18px;
    }

    .nav-left {
      display:flex;
      align-items:center;
      gap:10px;
    }

    .nav-left img {
      height:32px;
    }

    .nav-left h1 {
      font-size:20px;
      margin:0;
      font-weight:800;
      text-transform:uppercase;
    }

    .nav-right button {
      appearance:none;
      border:0;
      padding:10px 14px;
      border-radius:10px;
      font-weight:700;
      cursor:pointer;
      background:linear-gradient(180deg,var(--accent),#3556c7);
      color:white;
      display:flex;
      align-items:center;
      gap:6px;
    }

    /* search */
    .search-section {
      text-align:center;
      margin-bottom:24px;
    }

    .search-section .desc {
      font-weight:700;
      font-size:15px;
      margin-bottom:10px;
      display:block;
    }

    .search-container {
      position:relative;
      margin:0 auto;
      width:100%;
      max-width:600px;
    }

    .search-container input[type="text"] {
      width:100%;
      padding:14px;
      border-radius:12px;
      border:1px solid rgba(255,255,255,.06);
      background:var(--soft);
      color:var(--ink);
      outline:none;
      font-size:16px;
      transition:box-shadow .3s;
    }

    .search-container input[type="text"]:focus {
      box-shadow:0 0 0 4px rgba(106,167,255,.14);
    }

    /* cards */
    .card {
      background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(255,255,255,0)), var(--panel);
      border:1px solid rgba(255,255,255,.04);
      border-radius:16px;
      padding:18px;
      box-shadow:0 14px 40px rgba(0,0,0,.45);
      margin-bottom:20px;
    }

    .card h2 {
      margin-top:0;
      font-size:18px;
    }

    .doc-item {
      padding:10px;
      margin:6px 0;
      border-radius:10px;
      background:rgba(255,255,255,.02);
      border:1px solid rgba(255,255,255,.03);
      cursor:pointer;
      transition:transform .12s,box-shadow .12s;
    }

    .doc-item:hover {
      transform:translateY(-3px);
      box-shadow:0 6px 20px rgba(0,0,0,.4);
    }

    /* pdf */
    .pdf-view {
      width:100%;
      height:90vh;
    }

    .pdf-view embed {
      width:100%;
      height:100%;
      border:none;
    }

    @media(max-width:880px){
      .wrap {padding:16px}
      .pdf-view {height:85vh;}
    }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="nav-left">
        <img src="logo.png" alt="logo">
        <h1 id="page-title">Department Of Justice</h1>
      </div>
      <div class="nav-right" id="nav-right"></div>
    </header>

    <section class="search-section" id="search-section">
      <span class="desc">Rechercher un document officiel</span>
      <div class="search-container">
        <input type="text" id="search" placeholder="Rechercher...">
      </div>
    </section>

    <div id="list-view"></div>
  </div>

  <script>
    const documentsData = {
      "Rapports d'intervention": [
        { title: "RAPPORT INTERVENTION DPO_19082025_1", pdfUrl: "Rapport190820251.pdf" },
        { title: "RAPPORT INTERVENTION DPO_19082025_2", pdfUrl: "Rapport190820251.pdf" }
      ],
      "Audiences": [
        { title: "AUDIENCE 12/08/2025", pdfUrl: "Rapport190820251.pdf" }
      ],
      "Rapports d'audiences": [
        { title: "RAPPORT AUDIENCE 05/08/2025", pdfUrl: "Rapport190820251.pdf" }
      ],
      "Décrets": [
        { title: "DÉCRET JUSTICE 2025/08", pdfUrl: "Rapport190820251.pdf" }
      ]
    };

    const listView = document.getElementById("list-view");
    const pageTitle = document.getElementById("page-title");
    const navRight = document.getElementById("nav-right");
    const searchSection = document.getElementById("search-section");
    const searchInput = document.getElementById("search");
    let currentDoc = null;

    function updateMetaForDoc(title) {
      const metaTitle = title ? title : "Department Of Justice";
      const metaDesc = title ? `Consultez le document officiel : ${title}` : "Consultez les rapports, audiences et décrets officiels.";
      const metaImg = title ? "https://xbananous.github.io/departmentofjustice/doc.png" : "https://xbananous.github.io/departmentofjustice/logo.png";
      const metaUrl = title 
          ? `https://xbananous.github.io/departmentofjustice/index.html?doc=${encodeURIComponent(title)}`
          : "https://xbananous.github.io/departmentofjustice/index.html";

      document.title = metaTitle;
      document.querySelector('meta[name="description"]').setAttribute("content", metaDesc);
      document.querySelector('meta[property="og:title"]').setAttribute("content", metaTitle);
      document.querySelector('meta[property="og:description"]').setAttribute("content", metaDesc);
      document.querySelector('meta[property="og:image"]').setAttribute("content", metaImg);
      document.querySelector('meta[property="og:url"]').setAttribute("content", metaUrl);
    }

    function renderList(data) {
      listView.innerHTML = "";
      for (let category in data) {
        const section = document.createElement("div");
        section.className = "card";
        section.innerHTML = `<h2>${category}</h2>`;
        data[category].forEach(doc => {
          const div = document.createElement("div");
          div.className = "doc-item";
          div.textContent = doc.title;
          div.onclick = () => openPDF(doc.pdfUrl, doc.title);
          section.appendChild(div);
        });
        listView.appendChild(section);
      }
    }

    function openPDF(url, title) {
      currentDoc = title;
      history.replaceState(null, null, `index.html?doc=${encodeURIComponent(title)}`);

      pageTitle.textContent = title;
      navRight.innerHTML = `<button onclick="goHome()"><i data-lucide="arrow-left"></i> Retour</button>`;
      searchSection.style.display = "none";

      listView.innerHTML = `<div class="pdf-view"><embed src="${url}" type="application/pdf"></div>`;
      lucide.createIcons();

      updateMetaForDoc(title);
    }

    function goHome() {
      history.replaceState(null, null, 'index.html');
      renderList(documentsData);
      pageTitle.textContent = "Department Of Justice";
      navRight.innerHTML = "";
      searchSection.style.display = "block";
      updateMetaForDoc(null);
    }

    searchInput.addEventListener("input", () => {
      const query = searchInput.value.toLowerCase();
      if (!query) {
        renderList(documentsData);
        return;
      }
      const results = {};
      for (let cat in documentsData) {
        results[cat] = documentsData[cat].filter(doc => doc.title.toLowerCase().includes(query));
      }
      renderList(results);
    });

    window.addEventListener('DOMContentLoaded', () => {
      renderList(documentsData);
      const params = new URLSearchParams(window.location.search);
      if (params.has('doc')) {
        const doc = Object.values(documentsData).flat().find(d => d.title === params.get('doc'));
        if (doc) openPDF(doc.pdfUrl, doc.title);
      } else {
        updateMetaForDoc(null);
      }
    });
  </script>
</body>
</html>
